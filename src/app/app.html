<!-- NAVBAR -->
<nav class="navbar bg-light shadow-sm fixed-top px-4 d-flex align-items-center">

  <!-- MENU BUTTON (ONLY AFTER LOGIN) -->
  @if (currentUser$ | async) {
    <button
      class="btn btn-primary me-3"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#sideMenu"
    >
      <span class="material-symbols-outlined">menu</span>
    </button>
  }

  <!-- CENTER TITLE -->
  <div class="position-absolute start-50 translate-middle-x fw-bold fs-5 text-white">
    ✈️ Asian Flights
  </div>

  <!-- RIGHT SIDE -->
  <div class="ms-auto d-flex align-items-center gap-2">

    @if (currentUser$ | async) {
      <!-- AFTER LOGIN -->
      <a class="btn btn-primary" routerLink="/profile">Profile</a>
    } @else {
      <!-- BEFORE LOGIN -->
      <a class="btn btn-primary" routerLink="/">Home</a>
      <a class="btn btn-primary" routerLink="/signin">Sign in</a>
    }

  </div>

</nav>

<!-- SIDEBAR (ONLY AFTER LOGIN) -->
@if (currentUser$ | async) {
  <div class="collapse overlay-sidebar" id="sideMenu">
    <div class="sidebar shadow">

      <ul class="list-unstyled d-flex flex-column gap-3 h-100 p-3">

        <!-- HOME -->
        <li>
          <a class="nav-link d-flex align-items-center gap-2" routerLink="/">
            <span class="material-symbols-outlined">home</span>
            Home
          </a>
        </li>

        <!-- ADMIN -->
        @if ((user$ | async) === 'admin') {
          <li>
            <a class="nav-link d-flex align-items-center gap-2" routerLink="/addFlights">
              <span class="material-symbols-outlined">flight</span>
              Flight Inventory
            </a>
          </li>
        }

        <!-- USER -->
        @if ((user$ | async) !== 'admin') {
          <li>
            <a class="nav-link d-flex align-items-center gap-2" routerLink="/tickets">
              <span class="material-symbols-outlined">confirmation_number</span>
              Bookings
            </a>
          </li>
        }

        <!-- CHANGE PASSWORD -->
        <li>
          <a class="nav-link d-flex align-items-center gap-2" routerLink="/change-password">
            <span class="material-symbols-outlined">lock</span>
            Change Password
          </a>
        </li>

        <!-- LOGOUT -->
        <li class="mt-auto">
          <button class="btn btn-outline-danger w-100" (click)="logout()">
            Logout
          </button>
        </li>

      </ul>

    </div>
  </div>
}

<!-- MAIN CONTENT -->
<div class="content pt-5">
  <router-outlet></router-outlet>
</div>
