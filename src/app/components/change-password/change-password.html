<div class="d-flex justify-content-center align-items-center my-5 w-100 flex-column">

  @if (error$ | async; as error) {
    <div class="alert alert-danger my-5 text-center">
      {{ error.replace('Error: ', '') }}
    </div>
  }

  <form
    [formGroup]="form"
    class="card p-4 shadow-sm"
    (ngSubmit)="change()"
    style="width: 100%; max-width: 400px;"
  >
    <div class="d-flex flex-column gap-3">

      <!-- OLD PASSWORD -->
      <div class="form-group">
        <label for="oldPassword">Old Password</label>
        <input
          id="oldPassword"
          type="password"
          class="form-control"
          formControlName="oldPassword"
        />
        @if (form.get('oldPassword')?.touched && form.get('oldPassword')?.hasError('required')) {
          <small class="text-danger">Old password is required.</small>
        }
      </div>

      <!-- NEW PASSWORD -->
      <div class="form-group">
        <label for="newPassword">New Password</label>
        <input
          id="newPassword"
          type="password"
          class="form-control"
          formControlName="newPassword"
        />

        <small class="text-muted">
          Minimum 12 characters (15+ encouraged) with upper, lower, number, and special.
        </small>

       @if (form.get('newPassword')?.touched || form.get('newPassword')?.dirty) {

  @if (form.get('newPassword')?.errors; as e) {

    @if (e['required']) {
      <small class="text-danger">New password is required.</small>

    } @else if (e['minLength']) {
      <small class="text-danger">At least 12 characters required.</small>

    } @else if (e['uppercase']) {
      <small class="text-danger">Add one uppercase letter.</small>

    } @else if (e['lowercase']) {
      <small class="text-danger">Add one lowercase letter.</small>

    } @else if (e['digit']) {
      <small class="text-danger">Add one number.</small>

    } @else if (e['special']) {
      <small class="text-danger">Add one special character.</small>
    }

  }
}


      </div>

      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="form.invalid"
      >
        Change Password
      </button>

    </div>
  </form>
</div>
